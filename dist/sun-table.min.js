var sun;!function(t){var e;!function(t){t.SunTableModule=angular.module("sun-table",[])}(e=t.table||(t.table={}))}(sun||(sun={}));var sun;!function(t){var e;!function(t){function e(t,e){var n=t[e];return"false"===n||"0"===n?!1:t.hasOwnProperty(e)}function n(t){return t.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2")}var a=function(){function t(t){this.name=t,this.prevented=!1}return t.prototype.prevent=function(){this.prevented=!0},t}();t.Event=a;var r=function(){function t(){}return t.prototype.on=function(t,e,n){return void 0===n&&(n=this),this.__listeners=this.__listeners||{},this.__listeners[t]=this.__listeners[t]||[],this.__listeners[t].push({callback:e,context:n}),this},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=(this.__listeners||{})[t]||[];e[0]instanceof a?r=e[0]:(r=new a(t),e.unshift(r));for(var s=0;s<i.length&&(i[s].callback.apply(i[s].context,e),!r.prevented);s++);return r},t}();t.Observable=r,t.attrToBoolean=e,t.camelToDash=n}(e=t.helpers||(t.helpers={}))}(sun||(sun={}));var __extends=this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);n.prototype=e.prototype,t.prototype=new n},sun;!function(t){var e;!function(e){function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}var a,r,i=function(){function t(){this.page=1,this.sorting={},this.filter={}}return t}();e.Params=i,function(t){t[t.AscDesc=2]="AscDesc",t[t.AscDescReset=3]="AscDescReset"}(e.OrderSteps||(e.OrderSteps={}));var s=(e.OrderSteps,function(){function t(){this.data=null,this.total=0,this.defaultSort="desc",this.filterDelay=750,this.counts=[10,25,50,100],this.steps=2}return t}());e.Settings=s;var o=function(e){function s(n,a){e.call(this),this.$params=new i,this.$settings=new t.table.Settings,this.$loading=!1,angular.isFunction(n)&&(n={populateData:n}),this.settings(s.defaultSettings),this.settings(n),this.parameters(a)}return __extends(s,e),s.prototype.parameters=function(t,e){if(void 0===e&&(e=!1),angular.isDefined(t)){for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];if(e&&a.indexOf("[")>=0){for(var i=a.split(/\[(.*)\]/).reverse(),s="",o=0,l=i.length;l>o;o++){var u=i[o];if(""!==u){var p=r;r={},r[s=u]=n(p)?parseFloat(p):p}}"sorting"===s&&(this.$params[s]={}),this.$params[s]=angular.extend(this.$params[s]||{},r[s])}else this.$params[a]=n(t[a])?parseFloat(t[a]):angular.copy(t[a])}return this}return this.$params},s.prototype.settings=function(t){return angular.isDefined(t)?(angular.isArray(t.data)&&(t.total=t.data.length),this.$settings=angular.extend(this.$settings,t),this):this.$settings},Object.defineProperty(s.prototype,"page",{get:function(){return angular.isDefined(this.$params.page)?this.$params.page:1},set:function(t){this.$params.page=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"count",{get:function(){return angular.isDefined(this.$params.count)?this.$params.count:this.$settings.counts[0]},set:function(t){this.$params.count=t,this.$params.page=1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filter",{get:function(){return this.$params.filter},set:function(t){this.$params.filter=t,this.page=1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"total",{get:function(){return this.$settings.total},set:function(t){this.$settings.total=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sorting",{get:function(){return this.$params.sorting},set:function(t){this.$params.sorting=t},enumerable:!0,configurable:!0}),s.prototype.orderBy=function(){var t=[],e=this.$params.sorting;for(var n in e)e.hasOwnProperty(n)&&e[n]&&t.push(("asc"===e[n]?"+":"-")+n);return t},s.prototype.getStaticData=function(){var t=r("filter")(this.$settings.data,this.filter),e=r("orderBy")(t,this.orderBy());return this.total=e.length,e.slice((this.page-1)*this.count,this.page*this.count)},s.prototype.getData=function(){var t=[];return this.$settings.populateData?t=this.$settings.populateData.call(this,this.$params):angular.isArray(this.$settings.data)&&(t=this.getStaticData()),a.when(t)},s.prototype.getGroups=function(){throw new Error("Not implemented")},s.prototype.generatePagesArray=function(t,e,n){var a,r,i,s,o,l;if(a=11,l=[],o=Math.ceil(e/n),o>1){l.push({type:"prev",number:Math.max(1,t-1),active:t>1}),l.push({type:"first",number:1,active:t>1}),i=Math.round((a-5)/2),s=Math.max(2,t-i),r=Math.min(o-1,t+2*i-(t-s)),s=Math.max(2,s-(2*i-(r-s)));for(var u=s;r>=u;)l.push(u===s&&2!==u||u===r&&u!==o-1?{type:"more",active:!1}:{type:"page",number:u,active:t!==u}),u++;l.push({type:"last",number:o,active:t!==o}),l.push({type:"next",number:Math.min(o,t+1),active:o>t})}return l},s.prototype.reload=function(){var t,e=this;return this.$loading=!0,this.emit("beforeReload").prevented?a.reject("Reload canceled"):(t=this.$params.groupBy?this.getGroups():this.getData(),a.when(t).then(function(t){return e.$data=t,e.$pages=e.generatePagesArray(e.page,e.total,e.count),e.emit("afterReload",t),t})["finally"](function(){e.$loading=!1}))},s}(t.helpers.Observable);e.SunTableParams=o,e.SunTableModule.provider("SunTableParams",function(){var t=this;return this.defaultSettings=new s,this.$get=["$q","$filter",function(e,n){return a=e,r=n,o.defaultSettings=t.defaultSettings,o}],this})}(e=t.table||(t.table={}))}(sun||(sun={}));var sun;!function(t){var e;!function(t){var e=function(){function t(t,e){this.$scope=t,this.$timeout=e}return t.prototype.init=function(t){var e=this;this.$table=t;var n=this.$timeout,a=null,r={},i=function(){e.setFilter(r)};this.requestFilterUpdate=function(t,e){n.cancel(a),r[t]=e,a=n(i,this.$table.$settings.filterDelay)},this.requestForcedFilterUpdate=function(t,e){n.cancel(a),r[t]=e,i()}},t.prototype.sortBy=function(t,e){var n,a=this.$table,r=[n=a.$settings.defaultSort,"asc"===n?"desc":"asc"];3==a.$settings.steps&&r.push(void 0);var i=(r.indexOf(a.sorting[t])+1)%r.length,s=r[i];e&&(e.ctrlKey||e.metaKey)||(a.sorting={}),s?a.sorting[t]=s:delete a.sorting[t]},t.prototype.setFilter=function(t,e){if(angular.isString(t)){var n={};n[t]=e,t=n}this.$table.filter=_(this.$table.filter).extend(t).reduce(function(t,e,n){return void 0!=e&&(t[n]=e),t},{})},t.prototype.requestForcedFilterUpdate=function(){throw new Error("Controller was not initialized")},t.prototype.requestFilterUpdate=function(){throw new Error("Controller was not initialized")},t.$inject=["$scope","$timeout"],t}();t.SunTableController=e,angular.module("sun-table").controller("SunTableController",e)}(e=t.table||(t.table={}))}(sun||(sun={}));var sun;!function(t){var e;!function(t){function e(t,e){for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&t.attr(n,e[n])}function n(t,e,n,a){void 0===n&&(n=void 0),void 0===a&&(a=!1);var r=n;return t instanceof Node||(t=t[0]),t.hasAttribute(e)&&(r=t.getAttribute(e),a&&t.removeAttribute(e)),r}function a(t,e,a){return void 0===a&&(a=void 0),n(t,e,a,!0)}var r=function(){function t(){this.sortable="",this.ngShow=null,this.ngHide=null}return t}();t.CopyAttributes=r;var i=function(){function t(){this.copy=new r}return t}();t.TableColumn=i,t.SunTableModule.directive("sunTable",["$compile",function(t){return{restrict:"A",priority:1001,scope:!0,controller:"SunTableController",controllerAs:"ngTable",require:"sunTable",compile:function(r){var s="table"===r[0].tagName.toLowerCase()?r:r.find("table"),o=[],l=0,u=s.children("thead");return u.detach(),angular.forEach(u.find("tr > th, [sun-head-cell]"),function(t){var e=angular.element(t);e.detach();var r=new i;r.id=l++,r.template=$(t),r.filter=a(t,"filter"),r.filterData=a(t,"filter-data"),r.copy.ngShow=n(t,"ng-show"),r.copy.ngHide=n(t,"ng-hide"),o.push(r)}),function(n,a,r,i){n.$columns=o,n.$watch(r.sunTable,function(t){angular.isUndefined(t)||(i.init(t),n.$table=t)}),n.$watch("$table.$params",function(){n.$table.reload()},!0);var s;if("false"===u.attr("partial"))s=u;else{s=document.createElement("thead");var l,p=document.createElement("tr"),c=document.createElement("tr"),f=!1;o.forEach(function(t){var n=t.template.appendTo(p),a=$(document.createElement("th")).appendTo(c),r=n.children("filter").detach();if(t.filter||r.length>0){f=!0;var i,s;(l=t.filter.match(/^\s*([\s\S]+?)\s+as\s+([\s\S]+?)\s*$/))?(i=l[1],s=l[2]):(i=t.filter,s=n.attr("sun-head-cell")),e(a,{"sun-head-filter":"",type:i,name:s,filter:t.filter,"filter-data":t.filterData}),r.length>0&&(_.each(r[0].attributes,function(t){a.attr(t.name,t.value)}),a.append(r.children()))}}),s.appendChild(p),f&&s.appendChild(c)}a.prepend(s),t(s)(n)}}}}]),t.SunTableModule.directive("sunHeadCell",function(){return{require:"^sunTable",transclude:!0,link:function(t,e,n,a,r){r(t,function(t){var n=angular.element(document.createElement("div"));e.append(n.append(t))});var i=n.sortable||n.name||n.sunHeadCell;n.hasOwnProperty("sortable")&&(e.addClass("sortable"),t.$watch("$table.sorting."+i,function(t){e.removeClass("sort-asc sort-desc"),t&&e.addClass("sort-"+t)}),e.on("click",function(e){t.$apply(function(){a.sortBy(i,e)})}))}}})}(e=t.table||(t.table={}))}(sun||(sun={}));var sun;!function(t){var e;!function(t){t.SunTableModule.constant("SunTableTemplates",{prefix:"",pagination:{footer:"pagination/partials/footer.html",pagination:"pagination/partials/pagination.html",rowsPerPage:"pagination/partials/rows-per-page.html"},filter:{select:"filter/partials/select.html",text:"filter/partials/text.html"}})}(e=t.table||(t.table={}))}(sun||(sun={}));var sun;!function(t){var e;!function(t){var e=function(){function t(t,e,n){this.$scope=t,this.$attrs=e,this.$q=n}return t.prototype.init=function(t){var e=this;this.tableCtrl=t,this.name=this.$attrs.name||this.$attrs.sunHeadFilter,this.value=t.$table.filter[this.name],this.$scope.$watch("filter.value",function(t,n){t!==n&&e.update()}),this.$scope.$watch(this.$attrs.filterData,function(t){t?e.$q.when(t).then(function(t){e.filterData=t}):e.filterData=null})},t.prototype.update=function(t){t||this.instant?this.tableCtrl.requestForcedFilterUpdate(this.name,this.value):this.tableCtrl.requestFilterUpdate(this.name,this.value)},t.prototype.clear=function(){this.value=void 0},t.$inject=["$scope","$attrs","$q"],t}();t.SunFilterController=e,t.SunTableModule.controller("SunFilterController",e),t.SunTableModule.controller("SunFilterSelectController",["$scope",function(t){t.template="k as v for (k,v) in filter.filterData"}])}(e=t.table||(t.table={}))}(sun||(sun={}));var sun;!function(t){var e;!function(e){e.SunTableModule.directive("sunHeadFilter",["$compile","$timeout","SunTableTemplates",function(t,n,a){return{require:["^sunTable","sunHeadFilter"],controller:e.SunFilterController,controllerAs:"filter",scope:!0,transclude:!0,link:function(e,r,i,s,o){var l=s[0],u=s[1],p=i.type;p?(e.template=a.prefix+a.filter[p],r.append('<div ng-include="template"></div>'),t(r.contents())(e)):o(e,function(t){r.append(t)}),n(function(){return u.init(l)}),r.on("keypress",function(t){13===t.keyCode&&e.$apply(function(){return u.update(!0)})})}}}]),e.SunTableModule.directive("instantFilter",function(){return{require:"^sunHeadFilter",link:function(e,n,a,r){r.instant=t.helpers.attrToBoolean(a,"instantFilter")}}})}(e=t.table||(t.table={}))}(sun||(sun={}));var sun;!function(t){var e;!function(t){t.SunTableModule.directive("sun-table-footer",["SunTableTemplates",function(t){return{templateUrl:t.prefix+t.pagination.footer,scope:{$table:"=sunTableFooter"}}}]).directive("sunPagination",["SunTableTemplates",function(t){return{templateUrl:t.prefix+t.pagination.pagination,scope:{$table:"=sunPagination"}}}]),t.SunTableModule.directive("sunRowsPerPage",["SunTableTemplates",function(t){return{templateUrl:t.prefix+t.pagination.rowsPerPage,scope:{$table:"=sunRowsPerPage"}}}])}(e=t.table||(t.table={}))}(sun||(sun={}));var sun;!function(t){var e;!function(){function e(t){return void 0==t?void 0:t?parseInt(t):0}angular.module("sun-pending",[]).constant("PendingOptions",{template:"pending/pending.html",image:null,text:null}).directive("pending",["$animate","$http","$templateCache","PendingOptions","$compile","$timeout",function(n,a,r,i,s,o){return{transclude:!0,link:function(l,u,p,c,f){var h,d,g,m=t.helpers.attrToBoolean(p,"hideLoading");p.$addClass("pending-wrapper"),f(l,function(t){m&&(t.hide(),g=t),u.append(t)});var v=function(){g&&!h&&d&&(g.show(),g=null,v=angular.noop)};a.get(i.template,{cache:r}).then(function(t){var e=$(t.data);d=s(e)(l),u.append(d),v(),S(h)});var b,y="ng-hide",w="ng-hide-animate",S=function(t){n[t?"removeClass":"addClass"](d,y,{tempClasses:w})},T=0,C=e(p.flickerFix),F=e(p.debounce),P=F,x=e(p.debounceOut);t.helpers.attrToBoolean(p,"debounce")&&(S=_.wrap(S,function(t,n){if(!n){var a=+new Date-T-P;a>0&&C>a?F=x=0:0>a&&P>-a&&(F=e(p.debounce),x=e(p.debounceOut))}o.cancel(b),b=o(function(){t(n)},n?F:x||0)})),l.$watch(p.pending,function(t){h=t,h&&(T=+new Date),v(),d&&S(h)})}}}])}(e=t.pending||(t.pending={}))}(sun||(sun={})),angular.module("sun-table").run(["$templateCache",function(t){t.put("pending/pending.html",'<div class="pending-overlap">\r\n    <div class="center-wrap">\r\n        <div class="centered">\r\n            <span>Loading...</span>\r\n        </div>\r\n    </div>\r\n</div>'),t.put("filter/partials/select.html",'<select class="input-filter form-control"\r\n        ng-controller="SunFilterSelectController"\r\n        instant-filter=""\r\n        ng-model="filter.value"\r\n        ng-options="{{template}}" id="">\r\n    <option value="">\r\n        &mdash;&mdash;&mdash;&mdash;&mdash;\r\n    </option>\r\n</select>\r\n\r\n'),t.put("filter/partials/text.html",'<input type="text" ng-model="filter.value"\r\n       class="input-filter form-control"/>'),t.put("pagination/partials/footer.html",'<div sun-pagination="$table" class="pull-right"></div>\r\n<div sun-rows-per-page="$table"></div>'),t.put("pagination/partials/pagination.html",'<ul class="pagination sun-table-pagination">\r\n    <li ng-class="{\'disabled\': !page.active}" ng-repeat="page in $table.$pages" ng-switch="page.type">\r\n        <a ng-switch-when="prev" ng-click="$table.page = page.number" href="">&laquo;</a>\r\n        <a ng-switch-when="first" ng-click="$table.page = page.number" href=""><span\r\n                ng-bind="page.number"></span></a>\r\n        <a ng-switch-when="page" ng-click="$table.page = page.number" href=""><span ng-bind="page.number"></span></a>\r\n        <a ng-switch-when="more" ng-click="$table.page = page.number" href="">&#8230;</a>\r\n        <a ng-switch-when="last" ng-click="$table.page = page.number" href=""><span ng-bind="page.number"></span></a>\r\n        <a ng-switch-when="next" ng-click="$table.page = page.number" href="">&raquo;</a>\r\n    </li>\r\n</ul>'),t.put("pagination/partials/rows-per-page.html",'<ul ng-if="$table.$settings.counts.length" class="pagination">\r\n    <li ng-repeat="count in $table.$settings.counts"\r\n        ng-class="{\'active\':$table.count == count}"\r\n        ng-click="$table.count=count">\r\n        <a href="" ng-bind="count"></a>\r\n    </li>\r\n</ul>')}]);